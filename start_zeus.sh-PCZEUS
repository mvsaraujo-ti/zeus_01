#!/bin/bash

echo "======================================"
echo "ğŸš€ Iniciando Zeus - PCZEUS (Casa)"
echo "ğŸ“ Projeto: ~/DEV/zeus_01"
echo "======================================"

# Garantia de caminho
cd /home/zeus/DEV/zeus_01 || {
  echo "âŒ Pasta zeus_01 nÃ£o encontrada"
  exit 1
}

# Ativar venv
if [ ! -d "venv" ]; then
  echo "âŒ venv nÃ£o encontrado. Abortando."
  exit 1
fi

echo "ğŸ Ativando ambiente virtual..."
source venv/bin/activate

# ValidaÃ§Ã£o
PY=$(which python3)
if [[ "$PY" != *"zeus_01/venv"* ]]; then
  echo "âŒ Ambiente virtual incorreto"
  echo "Python atual: $PY"
  exit 1
fi

echo "âœ… venv correto ativo"

# Subir Qdrant
echo "ğŸ§  Subindo Qdrant (Docker)..."
docker compose up -d

# Subir Zeus
echo "ğŸ¤– Iniciando backend do Zeus..."
cd backend || exit 1

uvicorn app.main:app --host 0.0.0.0 --port 8600
